<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>My Final College Paper</title>
  <meta name="description" content="My Final College Paper">
  <meta name="generator" content="bookdown 0.5 and GitBook 2.6.7">

  <meta property="og:title" content="My Final College Paper" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="My Final College Paper" />
  
  
  

<meta name="author" content="Nathaniel Brown">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="3-data.html">
<link rel="next" href="5-disc.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />










</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"></a></li>
<li class="divider"></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="1" data-path="1-abstract.html"><a href="1-abstract.html"><i class="fa fa-check"></i><b>1</b> Abstract</a></li>
<li class="chapter" data-level="2" data-path="2-litreview.html"><a href="2-litreview.html"><i class="fa fa-check"></i><b>2</b> Literature Review</a><ul>
<li class="chapter" data-level="2.0.1" data-path="2-litreview.html"><a href="2-litreview.html#how-do-i-get-the-full-citations-to-show-up-and-not-just-last-name-and-year"><i class="fa fa-check"></i><b>2.0.1</b> how do I get the full citations to show up and not just last name and year?</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="3-data.html"><a href="3-data.html"><i class="fa fa-check"></i><b>3</b> Data</a><ul>
<li class="chapter" data-level="3.1" data-path="3-data.html"><a href="3-data.html#description-of-dataset"><i class="fa fa-check"></i><b>3.1</b> Description of Dataset</a></li>
<li class="chapter" data-level="3.2" data-path="3-data.html"><a href="3-data.html#data-cleaning"><i class="fa fa-check"></i><b>3.2</b> Data Cleaning</a></li>
<li class="chapter" data-level="3.3" data-path="3-data.html"><a href="3-data.html#exploratory-data-analysis"><i class="fa fa-check"></i><b>3.3</b> Exploratory Data Analysis</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="4-models.html"><a href="4-models.html"><i class="fa fa-check"></i><b>4</b> Models &amp; Analysis</a><ul>
<li class="chapter" data-level="4.1" data-path="4-models.html"><a href="4-models.html#description-of-models"><i class="fa fa-check"></i><b>4.1</b> Description of Models</a><ul>
<li class="chapter" data-level="4.1.1" data-path="4-models.html"><a href="4-models.html#generalized-linear-model"><i class="fa fa-check"></i><b>4.1.1</b> Generalized Linear Model</a></li>
<li class="chapter" data-level="4.1.2" data-path="4-models.html"><a href="4-models.html#hierarchical-generalized-linear-model"><i class="fa fa-check"></i><b>4.1.2</b> Hierarchical Generalized Linear Model</a></li>
<li class="chapter" data-level="4.1.3" data-path="4-models.html"><a href="4-models.html#discounted-likelihood-hierarchical-model"><i class="fa fa-check"></i><b>4.1.3</b> Discounted Likelihood Hierarchical Model</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="4-models.html"><a href="4-models.html#analysis"><i class="fa fa-check"></i><b>4.2</b> Analysis</a><ul>
<li class="chapter" data-level="4.2.1" data-path="4-models.html"><a href="4-models.html#generalized-linear-model-1"><i class="fa fa-check"></i><b>4.2.1</b> Generalized Linear Model</a></li>
<li class="chapter" data-level="4.2.2" data-path="4-models.html"><a href="4-models.html#hierarchical-generalized-linear-model-1"><i class="fa fa-check"></i><b>4.2.2</b> Hierarchical Generalized Linear Model</a></li>
<li class="chapter" data-level="4.2.3" data-path="4-models.html"><a href="4-models.html#discounted-likelihood-hierarchical-model-1"><i class="fa fa-check"></i><b>4.2.3</b> Discounted Likelihood Hierarchical Model</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="5-disc.html"><a href="5-disc.html"><i class="fa fa-check"></i><b>5</b> Discussion</a><ul>
<li class="chapter" data-level="5.1" data-path="5-disc.html"><a href="5-disc.html#evaluation-of-models"><i class="fa fa-check"></i><b>5.1</b> Evaluation of Models</a></li>
<li class="chapter" data-level="5.2" data-path="5-disc.html"><a href="5-disc.html#conclusion"><i class="fa fa-check"></i><b>5.2</b> Conclusion</a></li>
<li class="chapter" data-level="5.3" data-path="5-disc.html"><a href="5-disc.html#future-goals"><i class="fa fa-check"></i><b>5.3</b> Future Goals</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="A-appendix-1-code.html"><a href="A-appendix-1-code.html"><i class="fa fa-check"></i><b>A</b> Appendix 1: Code</a><ul>
<li class="chapter" data-level="A.1" data-path="A-appendix-1-code.html"><a href="A-appendix-1-code.html#generalized-linear-model-2"><i class="fa fa-check"></i><b>A.1</b> Generalized Linear Model</a></li>
<li class="chapter" data-level="A.2" data-path="A-appendix-1-code.html"><a href="A-appendix-1-code.html#hierarchical-generalized-linear-model-2"><i class="fa fa-check"></i><b>A.2</b> Hierarchical Generalized Linear Model</a></li>
<li class="chapter" data-level="A.3" data-path="A-appendix-1-code.html"><a href="A-appendix-1-code.html#discounted-likelihood-hierarchical-model-2"><i class="fa fa-check"></i><b>A.3</b> Discounted Likelihood Hierarchical Model</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="B-appendix-2-diagnostic-plots.html"><a href="B-appendix-2-diagnostic-plots.html"><i class="fa fa-check"></i><b>B</b> Appendix 2: Diagnostic Plots</a><ul>
<li class="chapter" data-level="B.1" data-path="B-appendix-2-diagnostic-plots.html"><a href="B-appendix-2-diagnostic-plots.html#generalized-linear-model-3"><i class="fa fa-check"></i><b>B.1</b> Generalized Linear Model:</a></li>
</ul></li>
<li class="chapter" data-level="C" data-path="C-appendix-3.html"><a href="C-appendix-3.html"><i class="fa fa-check"></i><b>C</b> Appendix 3:</a><ul>
<li class="chapter" data-level="C.1" data-path="C-appendix-3.html"><a href="C-appendix-3.html#home-games-only"><i class="fa fa-check"></i><b>C.1</b> Home Games Only</a></li>
<li class="chapter" data-level="C.2" data-path="C-appendix-3.html"><a href="C-appendix-3.html#season-only"><i class="fa fa-check"></i><b>C.2</b> 2015 Season Only</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">My Final College Paper</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="models" class="section level1">
<h1><span class="header-section-number">Chapter 4</span> Models &amp; Analysis</h1>
<div id="description-of-models" class="section level2">
<h2><span class="header-section-number">4.1</span> Description of Models</h2>
<p>For our models, we consider the shot location, the shooter identity, a home court indicator, and the shooting outcomes of nearby games as factors that can affect a shot outcome. In every model, we use Gibbs sampling in the JAGS library to build a logistic regression model that provides the posterior distribution of the shot location parameters (distance and angle). The model does not account for covariance between these predictors. In addition, we build mixed effects and discounted likelihood models to control for shooter identity and game identity, respectively. These models will show us how consistent the show location parameters are between shooters and between games. In our sampling method, we set priors using the Maximum Likelihood Estimates for the first four games in the dataset, and we initialize our chains using values of 0 for all means, and 1 for all variances.</p>
<p>The JAGS code used to build these models, as well as some diagnostic plots, can be found in Appendices <em>number</em> and <em>number</em>, respectively.</p>
<div id="generalized-linear-model" class="section level3">
<h3><span class="header-section-number">4.1.1</span> Generalized Linear Model</h3>
<p>First, we build a logistic regression model of the following form:</p>
<p><span class="math display">\[
\text{log} \left( \frac{p}{1-p} \right) = 
\beta_{\text{int}} +
X_{\text{r}}\beta_{\text{r}} +
X_{\theta}\beta_{\theta} +
X_{\text{H}}\beta_{\text{H}} +
\epsilon
\]</span></p>
<p><span class="math display">\[
\epsilon \sim N(0, \sigma^2)
\]</span></p>
<p>In this model, <span class="math inline">\(X\)</span> refers to the data, <span class="math inline">\(\beta\)</span> is the estimated pareter from the model, and <span class="math inline">\(\epsilon\)</span> is random error. The subscripts <span class="math inline">\(\text{int}\)</span>, <span class="math inline">\(\text{r}\)</span>, <span class="math inline">\(\theta\)</span>, and <span class="math inline">\(\text{H}\)</span> respectively refer to the intercept, the log distance of the shot, the angle of the shot, and whether shot was taken on Duke’s home court or another gym.</p>
</div>
<div id="hierarchical-generalized-linear-model" class="section level3">
<h3><span class="header-section-number">4.1.2</span> Hierarchical Generalized Linear Model</h3>
<p>Our second model is a hierarchical model, with random effects on the players.</p>
<p><span class="math display">\[
\text{log} \left( \frac{p}{1-p} \right) = 
\beta_{\text{int, j}} +
X_{\text{r}}\beta_{\text{r, j}} +
X_{\theta}\beta_{\theta, j} +
X_{\text{H}}\beta_{\text{H, j}} +
\epsilon
\]</span> <span class="math display">\[
\beta_{\text{int, j}} \sim N(\beta_{\text{int}}, \tau^2_{\text{int}})
\]</span> <span class="math display">\[
\beta_{\text{r, j}} \sim N(\beta_{\text{r}}, \tau^2_{\text{r}})
\]</span></p>
<p><span class="math display">\[
\beta_{\theta, j} \sim N(\beta_{\theta}, \tau^2_{\theta})
\]</span></p>
<p><span class="math display">\[
\beta_{\text{H, j}} \sim N(\beta_{\text{H}}, \tau^2_{\text{H}})
\]</span></p>
<p><span class="math display">\[
\epsilon \sim N(0, \sigma^2)
\]</span></p>
<p>This model contains random effects on each of the four parameters of interest—the intercept, the home effect, the distance effect, and the angle effect.</p>
</div>
<div id="discounted-likelihood-hierarchical-model" class="section level3">
<h3><span class="header-section-number">4.1.3</span> Discounted Likelihood Hierarchical Model</h3>
<p>This model contains the same random effects as the above model. <em>a couple more sentences</em></p>
<p><span class="math display">\[
\text{log} \left( \frac{p}{1-p} \right) = 
\beta_{\text{int, j}} +
X_{\text{r}}\beta_{\text{r, j}} +
X_{\theta}\beta_{\theta, j} +
X_{\text{H}}\beta_{\text{H, j}} +
\epsilon
\]</span></p>
<p><span class="math display">\[
\phi = L(\text{p}) = \Pi_{\text{i=1}}^\text{n}(\text{p}_i)^{1-\text{y}_i} (1 - \text{p}_i)^{1-\text{y}_i}
\]</span></p>
<p><span class="math display">\[
\delta = \Delta^{|g_i - g_0|}
\]</span></p>
<p><span class="math display">\[
\pi = \phi^{\delta}
\]</span></p>
<p><span class="math display">\[
\beta_{\text{int, j}} \sim N(\beta_{\text{int}}, \tau^2_{\text{int}})
\]</span></p>
<p><span class="math display">\[
\beta_{\text{r, j}} \sim N(\beta_{\text{r}}, \tau^2_{\text{r}})
\]</span></p>
<p><span class="math display">\[
\beta_{\theta, j} \sim N(\beta_{\theta}, \tau^2_{\theta})
\]</span></p>
<p><span class="math display">\[
\beta_{\text{H, j}} \sim N(\beta_{\text{H}}, \tau^2_{\text{H}})
\]</span></p>
<p><span class="math display">\[
\epsilon \sim N(0, \sigma^2)
\]</span> These equations show us that the contribution of an observed shot (in game <span class="math inline">\(g_i\)</span>) to the likelihood of the current shot (in game <span class="math inline">\(g_0\)</span>) decreases as the distance between the observations increases, and as <span class="math inline">\(\Delta\)</span> decreases. The code for each otf these models is</p>
<p>We deal with the missing data by comparing the results over all games to the results on only home games, since no home games are missing in the dataset. The formal Bayesian analysis allows us to produce full quantified inferences on these patterns over time, with probabilistic summaries of the between-game outcomes. For each provided game, we will analyze player shooting tendencies and outcomes, which provides understanding of inherent variability (or “randomness”) for the players, and formal assessments of differences in patterns game-to-game. These results are illustrated in Appendix <em>number</em>.</p>
</div>
</div>
<div id="analysis" class="section level2">
<h2><span class="header-section-number">4.2</span> Analysis</h2>
<div id="generalized-linear-model-1" class="section level3">
<h3><span class="header-section-number">4.2.1</span> Generalized Linear Model</h3>
<p>In our logistic regression model, we only look at shot location and the home court indicator as predictors for the shot outcome. To look at these effects for particular players, we simply subset the dataset to shots attempted by that player before running the Markov chain. The results of the credible intervals are reported for the same four players, in the same order as they were previously presented in the Exploratory Data Analysis section.</p>
<p><img src="thesis_files/figure-html/glm-1.png" width="672" style="display: block; margin: auto;" /><img src="thesis_files/figure-html/glm-2.png" width="672" style="display: block; margin: auto;" /></p>
<p>In the generalized linear model, the intercept corresponds to the log-odds of making a shot when angle is zero (the middle of the court) and the log distance is zero (one foot away from the hoop).</p>
<p>From these plots, we see that the team-wide 95% credible interval of the angle effect contains zero, and it is therefore probably not predictive of a made shot. The average distance effect shows us that the log-odds of a made shot decrease by <span class="math inline">\(\beta_r =\)</span> -0.5372 as the log distance increases by one unit and the other predictors remain constant. In the probability scale, this means that the probability of a made shot dereases by</p>
<p><span class="math display">\[
\frac{\text{e}^{\beta_r}}{1 + \text{e}^{\beta_r}} 
\]</span></p>
<p>which is equal to 0.3689.</p>
<p>We also see that the 95% credible interval on the effect of distance is completely negative, which follows the intuitive idea that the probability of a made shot significantly decreases as distance from the basket increases. The intercepts show us that there is not a substantial diference in baseline shooting performance between home games and away games.</p>
</div>
<div id="hierarchical-generalized-linear-model-1" class="section level3">
<h3><span class="header-section-number">4.2.2</span> Hierarchical Generalized Linear Model</h3>
<p>In this hierarchical model, we add random effects to allow the parameters to vary for each player in the dataset. We present the results below using densities of how the four players of interest compare to the team distribution, and by using contour plots that illustrate each player’s probability of a made shot by their location on the court.</p>
<p><img src="thesis_files/figure-html/hier-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>The hierarchical model shows us characteristics of our four high-usage players of interest compared to the rest of the players in the dataset. For example, the intercept plots show us that Player 2 is excellent at finishing under baseline conditions, but he also has a steeper-than-averge drop in his odds of scoring as his distance from the basket increases. We can also see that Player 1 strongly increases his odds of scoring when his angle is negative, which corresponds to the left side of the basket.</p>
<p>In the figures below, we have contour plots showing players’ expected field goal percentages at different locations on the court. Between our four players of interest, we can observe how Player 1 is more effective on the left side of the basket than the others, and how Player 2 has the darkest overall contour plot, suggesting he has the highest probability of scoring among those four.</p>
<p><img src="thesis_files/figure-html/contours-1.png" width="672" style="display: block; margin: auto;" /><img src="thesis_files/figure-html/contours-2.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="discounted-likelihood-hierarchical-model-1" class="section level3">
<h3><span class="header-section-number">4.2.3</span> Discounted Likelihood Hierarchical Model</h3>
<p>In the discounted likelihood models, the likelihood of a single observation is more heavily influenced by the observations close to it than the observations far away from it. We measure the “distance” between observations by the number of games between them; a shot attempt that occurs in the next or the preceding game will influence the likelihood of the observation more than a shot that occurs two games away. To build these models, we applied the “ones trick” in the JAGS library. See Appendix <em>1</em> for more details.</p>
<p>If models with larger values of <span class="math inline">\(\Delta\)</span> fit the data better, this suggests that shooting success is consistent throughout a career. If smaller values of <span class="math inline">\(\Delta\)</span> are more likely in the data, however, then we can assume there is a substantial amount of time variation in the data on the game level. The values of <span class="math inline">\(\Delta\)</span> that we use to fit the discounted likelihood model are 0.750, 0.800, 0.850, 0.900, 0.950, and 0.999.</p>
<p><img src="thesis_files/figure-html/hier-disc-1.png" width="672" style="display: block; margin: auto;" /><img src="thesis_files/figure-html/hier-disc-2.png" width="672" style="display: block; margin: auto;" /><img src="thesis_files/figure-html/hier-disc-3.png" width="672" style="display: block; margin: auto;" /><img src="thesis_files/figure-html/hier-disc-4.png" width="672" style="display: block; margin: auto;" /></p>
<p>The plots above illustrate how the intercepts change for players over time. These plots illustrate that smaller values of <span class="math inline">\(\Delta\)</span> allow for greater variation in parameter values over time.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="3-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="5-disc.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": [["thesis.pdf", "PDF"], ["thesis.epub", "EPUB"], ["thesis.docx", "Word"]],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
