<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Bayesian Analysis of Player Performance over Time</title>
  <meta name="description" content="Bayesian Analysis of Player Performance over Time">
  <meta name="generator" content="bookdown 0.5 and GitBook 2.6.7">

  <meta property="og:title" content="Bayesian Analysis of Player Performance over Time" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Bayesian Analysis of Player Performance over Time" />
  
  
  

<meta name="author" content="Nathaniel Brown">


<meta name="date" content="2018-04-10">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="literature-review.html">
<link rel="next" href="2-models.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"></a></li>
<li class="divider"></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="" data-path="literature-review.html"><a href="literature-review.html"><i class="fa fa-check"></i>Literature Review</a></li>
<li class="chapter" data-level="1" data-path="1-data.html"><a href="1-data.html"><i class="fa fa-check"></i><b>1</b> Data</a><ul>
<li class="chapter" data-level="1.1" data-path="1-data.html"><a href="1-data.html#description-of-dataset"><i class="fa fa-check"></i><b>1.1</b> Description of Dataset</a></li>
<li class="chapter" data-level="1.2" data-path="1-data.html"><a href="1-data.html#data-cleaning"><i class="fa fa-check"></i><b>1.2</b> Data Cleaning</a></li>
<li class="chapter" data-level="1.3" data-path="1-data.html"><a href="1-data.html#exploratory-data-analysis"><i class="fa fa-check"></i><b>1.3</b> Exploratory Data Analysis</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="2-models.html"><a href="2-models.html"><i class="fa fa-check"></i><b>2</b> Models &amp; Analysis</a><ul>
<li class="chapter" data-level="2.1" data-path="2-models.html"><a href="2-models.html#description-of-models"><i class="fa fa-check"></i><b>2.1</b> Description of Models</a><ul>
<li class="chapter" data-level="2.1.1" data-path="2-models.html"><a href="2-models.html#generalized-linear-model"><i class="fa fa-check"></i><b>2.1.1</b> Generalized Linear Model</a></li>
<li class="chapter" data-level="2.1.2" data-path="2-models.html"><a href="2-models.html#hierarchical-generalized-linear-model"><i class="fa fa-check"></i><b>2.1.2</b> Hierarchical Generalized Linear Model</a></li>
<li class="chapter" data-level="2.1.3" data-path="2-models.html"><a href="2-models.html#discounted-likelihood-hierarchical-model"><i class="fa fa-check"></i><b>2.1.3</b> Discounted Likelihood Hierarchical Model</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="2-models.html"><a href="2-models.html#analysis"><i class="fa fa-check"></i><b>2.2</b> Analysis</a><ul>
<li class="chapter" data-level="2.2.1" data-path="2-models.html"><a href="2-models.html#generalized-linear-model-1"><i class="fa fa-check"></i><b>2.2.1</b> Generalized Linear Model</a></li>
<li class="chapter" data-level="2.2.2" data-path="2-models.html"><a href="2-models.html#hierarchical-generalized-linear-model-1"><i class="fa fa-check"></i><b>2.2.2</b> Hierarchical Generalized Linear Model</a></li>
<li class="chapter" data-level="2.2.3" data-path="2-models.html"><a href="2-models.html#discounted-likelihood-hierarchical-model-1"><i class="fa fa-check"></i><b>2.2.3</b> Discounted Likelihood Hierarchical Model</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="3-disc.html"><a href="3-disc.html"><i class="fa fa-check"></i><b>3</b> Discussion</a><ul>
<li class="chapter" data-level="3.1" data-path="3-disc.html"><a href="3-disc.html#evaluation-of-models"><i class="fa fa-check"></i><b>3.1</b> Evaluation of Models</a></li>
<li class="chapter" data-level="3.2" data-path="3-disc.html"><a href="3-disc.html#results-from-model-with-delta-0.850"><i class="fa fa-check"></i><b>3.2</b> Results from Model with <span class="math inline">\(\delta\)</span> = 0.850</a></li>
<li class="chapter" data-level="3.3" data-path="3-disc.html"><a href="3-disc.html#conclusion"><i class="fa fa-check"></i><b>3.3</b> Conclusion</a></li>
<li class="chapter" data-level="3.4" data-path="3-disc.html"><a href="3-disc.html#future-goals"><i class="fa fa-check"></i><b>3.4</b> Future Goals</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="A-code-for-models.html"><a href="A-code-for-models.html"><i class="fa fa-check"></i><b>A</b> Code for Models</a><ul>
<li class="chapter" data-level="A.1" data-path="A-code-for-models.html"><a href="A-code-for-models.html#generalized-linear-model-2"><i class="fa fa-check"></i><b>A.1</b> Generalized Linear Model</a></li>
<li class="chapter" data-level="A.2" data-path="A-code-for-models.html"><a href="A-code-for-models.html#hierarchical-generalized-linear-model-2"><i class="fa fa-check"></i><b>A.2</b> Hierarchical Generalized Linear Model</a></li>
<li class="chapter" data-level="A.3" data-path="A-code-for-models.html"><a href="A-code-for-models.html#discounted-likelihood-hierarchical-model-2"><i class="fa fa-check"></i><b>A.3</b> Discounted Likelihood Hierarchical Model</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="B-reproducing-evaluation-plots.html"><a href="B-reproducing-evaluation-plots.html"><i class="fa fa-check"></i><b>B</b> Reproducing Evaluation Plots</a><ul>
<li class="chapter" data-level="B.1" data-path="B-reproducing-evaluation-plots.html"><a href="B-reproducing-evaluation-plots.html#home-games-only"><i class="fa fa-check"></i><b>B.1</b> Home Games Only</a></li>
<li class="chapter" data-level="B.2" data-path="B-reproducing-evaluation-plots.html"><a href="B-reproducing-evaluation-plots.html#one-season-only"><i class="fa fa-check"></i><b>B.2</b> One Season Only</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Bayesian Analysis of Player Performance over Time</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data" class="section level1">
<h1><span class="header-section-number">Chapter 1</span> Data</h1>
<div id="description-of-dataset" class="section level2">
<h2><span class="header-section-number">1.1</span> Description of Dataset</h2>
<p>The data for this analysis comes from SportVU, a player-tracking system from STATS, LLC. that provides precise coordinates for all ten players and the ball at a rate of 25 times per second. The Duke University Men’s Basketball team permitted us to use their SportVU data from the 2014 to 2017 basketball seasons for this project. Since the ability to record this data depends on specialized tracking cameras, Duke does not have this data for every game they play—only home games, and a few road games in arenas that had the technology installed. Therefore, there is a substantial amount of missing data between games. More specifically, between the 2014 and 2017 seasons, the Duke Men’s Basketball team played 147 games; this dataset contains 94 games, with 82 at Duke and 12 at other arenas.</p>
<p>For our analysis, we use the following files for each game:</p>
<ul>
<li>Final Sequence Play-by-Play Optical:</li>
</ul>
<p>This dataset comes in an a semi-structured Extensible Markup Language (XML) file, where there is a unique element for each “event” (an event is a basketball action such as a dribble, pass, shot, foul, etc.). Each event element has attributes describing the type of event, the time of the event, and the player who completed the action. We use these files to uncover when a shot is attempted in a game, who attempted the shot, and the result of the shot attempt.</p>
<!--
* Box Score Optical:

We use this dataset to match the names and IDs of players who are in the game. This is also an XML file, with elements corresponding to individual players. These elements contain attributes describing information about the player (e.g. team name, jersey number) and various statistics for the game (e.g. points, assists, distance run).
-->
<ul>
<li>Final Sequence Optical:</li>
</ul>
<p>These XML files contain the locations of all ten players and the ball during precise time intervals within the game (25 times per second). Each time unit has a unique element, and these elements have attributes describing the locations. We merge this with the Final Sequence Play-by-Play Optical data on the time attribute to obtain the shooter’s location at the moment of a shot attempt.</p>
</div>
<div id="data-cleaning" class="section level2">
<h2><span class="header-section-number">1.2</span> Data Cleaning</h2>
<p>Steps taken to clean the merged shooter IDs with shot locations include translating the locations to a half-court setting (the teams switch sides of the court halfway through every game, which means that we have to flip the coordinates across the middle of the court for about half of the shots in every game), converting the x-y coordinates to polar coordinates (in the units of feet and radians), and adding an indicator for home games. We only use the shots that Duke players attempt, because there is an inadequate amount of data for players on other teams—no opposing players appear in more than 5 games. The final dataset contains 5,467 observations from 31 shooters over 94 games. A summary of the cleaned dataset is in Table <a href="1-data.html#tab:summarytable">1.1</a>:</p>
<table>
<caption><span id="tab:summarytable">Table 1.1: </span>Summary of Dataset</caption>
<thead>
<tr class="header">
<th align="left">Name</th>
<th align="left">Type</th>
<th align="left">Values</th>
<th align="left">Extra Details</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">season</td>
<td align="left">categorical</td>
<td align="left">{2014, …, 2017}</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">gameid</td>
<td align="left">categorical</td>
<td align="left">NA</td>
<td align="left">94 unique values</td>
</tr>
<tr class="odd">
<td align="left">time</td>
<td align="left">continuous</td>
<td align="left">NA</td>
<td align="left">13-digit timestamp in milliseconds</td>
</tr>
<tr class="even">
<td align="left">globalplayerid</td>
<td align="left">categorical</td>
<td align="left">NA</td>
<td align="left">31 unique values</td>
</tr>
<tr class="odd">
<td align="left">r</td>
<td align="left">continuous</td>
<td align="left">[0, <span class="math inline">\(\infty\)</span>)</td>
<td align="left">Distance of shot from basket (feet)</td>
</tr>
<tr class="even">
<td align="left">theta</td>
<td align="left">continuous</td>
<td align="left">[-<span class="math inline">\(\pi\)</span>, <span class="math inline">\(\pi\)</span>]</td>
<td align="left">Angle of shot (radians)</td>
</tr>
<tr class="odd">
<td align="left">home</td>
<td align="left">categorical</td>
<td align="left">{0,1}</td>
<td align="left">1 if shot occured in a home game</td>
</tr>
<tr class="even">
<td align="left">result</td>
<td align="left">categorical</td>
<td align="left">{0,1}</td>
<td align="left">1 if shot was made (response)</td>
</tr>
</tbody>
</table>
<p>A small subset of the cleaned data is displayed below in Table <a href="1-data.html#tab:sampletable">1.2</a>:</p>
<table>
<caption><span id="tab:sampletable">Table 1.2: </span>Sample of Dataset</caption>
<thead>
<tr class="header">
<th align="right">season</th>
<th align="left">gameid</th>
<th align="left">time</th>
<th align="right">globalplayerid</th>
<th align="right">r</th>
<th align="right">theta</th>
<th align="right">home</th>
<th align="right">result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">2014</td>
<td align="left">201401070173</td>
<td align="left">1389141733839</td>
<td align="right">603106</td>
<td align="right">4.2076</td>
<td align="right">1.0746</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">2014</td>
<td align="left">201401070173</td>
<td align="left">1389141844712</td>
<td align="right">601140</td>
<td align="right">16.6537</td>
<td align="right">1.2973</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="right">2014</td>
<td align="left">201401070173</td>
<td align="left">1389143172185</td>
<td align="right">696289</td>
<td align="right">18.7901</td>
<td align="right">-0.0581</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">2014</td>
<td align="left">201401070173</td>
<td align="left">1389143196303</td>
<td align="right">601140</td>
<td align="right">23.4629</td>
<td align="right">0.9539</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="right">2014</td>
<td align="left">201401070173</td>
<td align="left">1389143220261</td>
<td align="right">756880</td>
<td align="right">6.5365</td>
<td align="right">0.0696</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p></p>
<p>Figure <a href="1-data.html#fig:shotplot">1.1</a> shows the locations of all the shots in the dataset, translating the locations to one half of the court, and excluding heaves from beyond half court. The variable <span class="math inline">\(\theta\)</span> has a range of <span class="math inline">\(2\pi\)</span> radians, but this plot shows that most of the attempts occur within the interval (-<span class="math inline">\(\frac{\pi}{2}\)</span>, <span class="math inline">\(\frac{\pi}{2}\)</span>). This figure also shows the bimodal distribution of shot distance over all players.</p>
<div class="figure" style="text-align: center"><span id="fig:shotplot"></span>
<img src="thesis_files/figure-html/shotplot-1.png" alt="Locations and Results of All Shots" width="672" />
<p class="caption">
Figure 1.1: Locations and Results of All Shots
</p>
</div>
</div>
<div id="exploratory-data-analysis" class="section level2">
<h2><span class="header-section-number">1.3</span> Exploratory Data Analysis</h2>
<p>The exploratory data analysis plots in Figure <a href="1-data.html#fig:smoothplot">1.2</a> examine how consistent the probability of a made shot is, using a loess smooth curve on the binary outcomes. We present these smoothed plots for four high-usage basketball players at Duke University between the 2014 and 2017 seasons. Each plot represents a single player’s ordered shooting outcomes for a single season. These plots do not account for the amount of time in between shots, but simply shot order and outcome.</p>
<p><img src="thesis_files/figure-html/smoothplot0-1.png" width="480" style="display: block; margin: auto;" /></p>
<div class="figure" style="text-align: center"><span id="fig:smoothplot"></span>
<img src="thesis_files/figure-html/smoothplot-1.png" alt="Moving Average of Shot Success Rate" width="480" />
<p class="caption">
Figure 1.2: Moving Average of Shot Success Rate
</p>
</div>
<p></p>
<p>We can see that the players vary in the consistency of their made shots, since they all contain spikes and trends. For example, Player 3 initially has a very high success rate, which quickly falls to the middle after about 30 shot attempts, and the Player 2 has a noticeable upward trend in shot success beginning around shot number 150.</p>
<p>We investigate the shooting outcomes using Bayesian models, and present the results in the next chapter.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="literature-review.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="2-models.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": [["thesis.pdf", "PDF"], ["thesis.epub", "EPUB"], ["thesis.docx", "Word"]],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
