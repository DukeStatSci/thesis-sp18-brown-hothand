# Exploratory Data Analysis {#EDA}


#### Exploratory Data Analysis

The following exploratory plots examine how consistent the probability of a made shot is, using a loess smooth curve on the binary outcomes. We present these smoothed plots for four high-usage basketball players at Duke University between the 2013-2014 and 2016-2017 seasons, and we leave the others in Appendix *number*. Each plot represents a single player's ordered shooting outcomes for a single season. These plots do not account for the amount of time in between shots, but simply shot order and outcome. 

```{r load}
load(file="../rdatafiles/Xtot.RData")

id1 <- 887665 
id2 <- 842301 
id3 <- 603106 
id4 <- 601140 
playerseasons <- matrix(
  c(id1,   2016,
    id2,   2015,
    id3,   2014,
    id4,   2015
  ),ncol=2,byrow = TRUE
)
colnames(playerseasons) <- c("globalplayerid" ,"season")
```

```{r, plots}

plotshottime <- function(playerid, season, playernum){
  Xtot_sub <- Xtot[Xtot$globalplayerid==playerid & Xtot$season==season,]
  par(las=1)
  if(nrow(Xtot_sub) < 10){
    # ggplot(data=NULL) + labs(title = "Not Enough Data") + theme_bw()
    plot(0,0,type="n", yaxt="n",xaxt="n", ylab="",xlab="")
    text(0,0,label="Not Enough Data", cex=2)
  }else{
    Y <- Xtot_sub$result #zoo::rollmean((Xtot_sub$result), 4)
    X <- 1:length(Y)
    scatter.smooth(X,Y,span=20/length(Y), main = paste0("Smoothed Shooting Outcomes: Player ",playernum),
                   yaxt="n",ylab="Result",xlab="Order")
    axis(side=2,at=c(0,1),labels=c("Miss","Make"))
  }
}

maxseason <- Xtot %>% group_by(globalplayerid, season) %>% summarize(num=n()) %>% group_by(globalplayerid) %>% mutate(m=max(num)) %>% filter(num==m) %>% as.data.frame()


for(i in 1:nrow(playerseasons)){
  r <- playerseasons[i,]
  plotshottime(r[[1]],r[[2]],i)
}
```

We can see that the plots vary in the consistency of their made shots, since they all contain spikes and trends. For example, the third plot initially has a very high success rate, which quickly falls to the middle after about thirty shot attempts, and the second plot has a noticeable upward trend in shot success beginning around shot number one hundred fifty.

We investigate the shooting outcomes using Bayesian models, and show the results in the next section.
